(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{436:function(t,s,a){"use strict";a.r(s);var n=a(31),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"工程化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工程化"}},[t._v("#")]),t._v(" 工程化")]),t._v(" "),a("h2",{attrs:{id:"规范化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#规范化"}},[t._v("#")]),t._v(" 规范化")]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("利用githooks，在开发同学提交代码的时，统一代码风格，做代码校验，杜绝不满足规则的代码提交上云；")])])]),t._v(" "),a("h4",{attrs:{id:"git-hooks"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-hooks"}},[t._v("#")]),t._v(" git hooks")]),t._v(" "),a("p",[t._v("git的钩子函数，通常用来做：")]),t._v(" "),a("ul",[a("li",[t._v("提交前做代码检测")]),t._v(" "),a("li",[t._v("提交时格式化代码，做代码美化兜底")]),t._v(" "),a("li",[t._v("提交后做自动化部署")]),t._v(" "),a("li",[t._v("...")])]),t._v(" "),a("p",[t._v("常用githook：")]),t._v(" "),a("ul",[a("li",[t._v("pre-commit")]),t._v(" "),a("li",[t._v("commit-msg")])]),t._v(" "),a("h4",{attrs:{id:"代码质量检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码质量检查"}},[t._v("#")]),t._v(" 代码质量检查")]),t._v(" "),a("ul",[a("li",[t._v("jslint")]),t._v(" "),a("li",[t._v("jshint")]),t._v(" "),a("li",[t._v("eslint")]),t._v(" "),a("li",[t._v("prettier")]),t._v(" "),a("li",[t._v("lint-staged [一个在git暂存区上运行linters的工具。]")]),t._v(" "),a("li",[t._v("husky [一个让配置 git 钩子变得更简单的工具。]")])]),t._v(" "),a("h4",{attrs:{id:"husky"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#husky"}},[t._v("#")]),t._v(" husky")]),t._v(" "),a("blockquote",[a("p",[t._v("Git hooks made easy（让git hooks变得简单）")]),t._v(" "),a("p",[a("em",[t._v("新版本，已不要再操作.git/hooks文件夹里的文件")])])]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("tyarn "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" husky -D      // 安装\ntyarn husky "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v("     // 项目根目录创建.husky文件夹，并指定为githooks目录,可提交到远程仓库\ntyarn "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" lint-staged -D\ntyarn "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" eslint prettier -D\ntyarn husky "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/pre-commit "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yarn lint-staged --allow-empty \"$1\"'")]),t._v("  // 创建钩子\ntyarn husky "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" .husky/commit-msg "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'yarn commitlint --edit \"$1\"'")]),t._v("  // 创建钩子\ntyarn "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" @commitlint/cli @commitlint/config-conventional -D\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"module.exports = {extends: ['@commitlint/config-conventional']}\"")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" commitlint.config.js\n\nnpx husky-init "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" // 一键安装与配置\n")])])]),a("p",[t._v("package.json")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"prepare"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"husky install"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src/**/*.{js,jsx,ts,tsx,json}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prettier --write"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"eslint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git add"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// prepare脚本会在npm install（不带参数）之后自动执行。也就是说当我们执行npm install安装完项目依赖后会执行 husky install命令")]),t._v("\n")])])]),a("p",[t._v("commitlint.config.js")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v(" module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@commitlint/config-conventional'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 以下时我们自定义的规则")]),t._v("\n  rules"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'type-enum'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'always'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bug'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 此项特别针对bug号，用于向测试反馈bug列表的bug修改情况")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'feat'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 新功能（feature）")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fix'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 修补bug")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'docs'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文档（documentation）")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'style'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 格式（不影响代码运行的变动）")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'refactor'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重构（即不是新增功能，也不是修改bug的代码变动）")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 增加测试")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'chore'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 构建过程或辅助工具的变动")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'revert'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// feat(pencil): add ‘graphiteWidth’ option (撤销之前的commit)")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'merge'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 合并分支， 例如： merge（前端页面）： feature-xxxx修改线程地址")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h4",{attrs:{id:"编码规范"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编码规范"}},[t._v("#")]),t._v(" 编码规范")]),t._v(" "),a("p",[t._v("Antd Pro 自动生成api\n依赖openAPI插件（自带）")]),t._v(" "),a("blockquote",[a("p",[t._v("然后再 config/config.ts 中配置 openAPI 的相关配置。")])]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[t._v("openAPI"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可引入定制化request")]),t._v("\n   requestLibPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("\"import { request } from 'umi'\"")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 后端同学的接口文档地址（swagger）")]),t._v("\n   schemaPath"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://192.168.30.116:9500/v2/api-docs"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 自动生成mock数据 ")]),t._v("\n   mock"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 文件夹名称")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//  projectName: 'branch'")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("执行命令")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("npm run openapi\n")])])]),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("services "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件夹")]),t._v("\n  ant-design-pro "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//文件夹")]),t._v("\n    typings.d.ts  为接口数据结构\n    xxx.ts        对应文件里会自动生成对应API\n")])])]),a("p",[t._v("项目文件规范\ncheckup")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("│   README.md \n│   config    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 配置文件夹  ")]),t._v("\n│   mock      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// mock数据文件夹")]),t._v("\n│   public    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 一些资源")]),t._v("\n└───src\n│   │   assets     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 静态资源")]),t._v("\n│   │   components "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 公共组件库")]),t._v("\n│   │   layouts    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 页面框架")]),t._v("\n│   │   \n│   └───pages  \n│   │   │   \n│   │   └───XxxxXxx   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块文件夹  （大驼峰）")]),t._v("\n│   │   │   │    \n│   │   │   └───components  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块组件  ")]),t._v("\n│   │   │   │   │    \n│   │   │   │   └─── XxxxxXxx  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块内组件    （大驼峰）")]),t._v("\n│   │   │   │       \n│   │   │   │   XxxxxXxx       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块内页面1 （大驼峰）")]),t._v("\n│   │   │   │   XxxxxXxx       "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块内页面2 （大驼峰）")]),t._v("\n│   │   │   │   index.less  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块样式文件 包含组件内所有样式（index，页面，组件）")]),t._v("\n│   │   │   └───index.tsx   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模块主入口  ")]),t._v("\n│   │   │       \n│   │   │   \n│   │   │   ...\n│   │   \n│   │   \n│   └───services  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// API文件")]),t._v("\n│   │   │   \n│   │   └───ant-design-pro  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 用来生成API与interface ")]),t._v("\n│   │   │   \n│   │   │  xxxxxXxxx          "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 对应模块的API 包含：interface ，API （小驼峰）")]),t._v("\n│   │   │   ...\n│   │   \n│   │   \n│   └───utils     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 公共工具方法文件")]),t._v("\n│     \n│     \n└───package.json\n")])])]),a("p",[t._v("API接口用法说明")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("requestTable 用于table类接口调用，已封装通用入参、出参，定制化入参需特殊处理，出参为前后端约定固定数据结构，如有改动及时沟通；")])]),t._v(" "),a("li",[a("p",[t._v("request 用于基础接口调用")])]),t._v(" "),a("li",[a("p",[t._v("所有接口可直接从openAPI自动生成的API复制过来使用，无需改动，以及对应的type数据结构")])]),t._v(" "),a("li",[a("p",[t._v("isSuccess 业务代码内判断接口返回是否成功")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("const res:ApiResponseXxx = await xxxXxx(params);\n      if(isSuccess(res)){\n      // do something 接口返回成功\n      }\n      // 接口返回失败通常会统一拦截处理，有特殊要求可在此操作\n")])])])]),t._v(" "),a("li",[a("p",[t._v("后端返回的对象({})、数组([]),都需要在取数据的时候做为空处理,如下：")]),t._v(" "),a("div",{staticClass:"language-ts extra-class"},[a("pre",{pre:!0,attrs:{class:"language-ts"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这种写法在变量声明是依赖类型推导，")]),t._v("\n\n建议在声明时，明确数据类型 openAPI会有生成；\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PageResultAppDTO_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("xxXxxx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" b"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PageResultAppDTO_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" c"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PageResultAppDTO_ "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"自动化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化"}},[t._v("#")]),t._v(" 自动化")]),t._v(" "),a("h2",{attrs:{id:"提效"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#提效"}},[t._v("#")]),t._v(" 提效")]),t._v(" "),a("h4",{attrs:{id:"vscode快捷键"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode快捷键"}},[t._v("#")]),t._v(" vscode快捷键")]),t._v(" "),a("p",[t._v("ctrl+上下箭头 上下滚动页面\nCtrl+Shift+K 删除某一行\nAlt+ ↑ / ↓ 移动某一行\nShift+Alt + ↓ / ↑ 复制某一行\nctrl + Enter 跳转下一行开头\nshift + ctrl + enter 跳转上一行开头\nCtrl+Shift+ 跳转到相应的匹配括号\nctrl+shift+[ 折叠\nhtml快速加注释 ctrl+/\n自动换行 Alt+z\nF8 移动到下一个错误的位置\nshift+F8 移动到上一个错误的位置\nF3 查找的快捷键或者 ctrl+F\nctrl+D 跳转选中各个相同的关键词\nctrl+alt +上下左右箭头 翻转屏幕\nctrl + I 选中光标所在行\n分屏快捷键 ctrl + |\nAlt+shift+F 自动格式化代码\n按住shift滚动滚轮可实现左右滚动\nctrl+F2 更改所以匹配项\n查找并更改所有的匹配项 先ctrl+F 而后 Alt+Enter 其实还有ctrl+H可以直接实现查找并替换\n上下移动某一行 Alt+上/下\nshift+上下箭头可选中\nctrl+i选中某一行")]),t._v(" "),a("h2",{attrs:{id:"mac"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mac"}},[t._v("#")]),t._v(" Mac")]),t._v(" "),a("h3",{attrs:{id:"命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[t._v("#")]),t._v(" 命令")]),t._v(" "),a("ul",[a("li",[t._v("vim 打开文件\n"),a("ol",[a("li",[t._v("i 进行插入操作")]),t._v(" "),a("li",[t._v("control + c 结束插入")]),t._v(" "),a("li",[t._v(":qa 保存并且退出")]),t._v(" "),a("li",[t._v(":wq 强行保存退出")])])]),t._v(" "),a("li",[t._v("ll -l@ 查看文件列表\n"),a("ol",[a("li",[t._v("-l 查看详细附加内容")]),t._v(" "),a("li",[t._v("-l@ 查看@的内容")])])]),t._v(" "),a("li",[t._v("xattr -c fileName 去掉文件权限后面的@，文件被非默认应用打开修改后，会出现此问题")]),t._v(" "),a("li",[t._v("mv 移动文件\n"),a("ul",[a("li",[t._v("mv file dir 文件移动到文件夹里")]),t._v(" "),a("li",[t._v("mv dir dir2 文件夹移动到文件夹，dir2不存在则为"),a("strong",[t._v("改名操作")])]),t._v(" "),a("li",[t._v("mv file file2 file3 dir 多个文件移动到文件夹，文件夹不存在则报错")])])]),t._v(" "),a("li",[t._v("rm 删除文件/目录")]),t._v(" "),a("li",[t._v("mkdir 创建文件夹")]),t._v(" "),a("li",[t._v("pwd 查看当前目录路径")]),t._v(" "),a("li",[t._v("cp 拷贝")]),t._v(" "),a("li")]),t._v(" "),a("h2",{attrs:{id:"部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[t._v("#")]),t._v(" 部署")]),t._v(" "),a("ul",[a("li",[t._v("流水线配置")]),t._v(" "),a("li",[t._v("idaas配置")]),t._v(" "),a("li",[t._v("edas配置")])]),t._v(" "),a("h2",{attrs:{id:"ideas登录-ctx-session为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ideas登录-ctx-session为"}},[t._v("#")]),t._v(" ideas登录 ctx.session为{}")]),t._v(" "),a("h3",{attrs:{id:"cookie-里没有egg-sess"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cookie-里没有egg-sess"}},[t._v("#")]),t._v(" cookie 里没有EGG_SESS")]),t._v(" "),a("blockquote",[a("p",[t._v("这个是需要egg端自行配置，通过id_token去’jsonwebtoken‘sdk请求相关数据")])]),t._v(" "),a("h2",{attrs:{id:"idaas配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#idaas配置"}},[t._v("#")]),t._v(" idaas配置")]),t._v(" "),a("ul",[a("li",[t._v("新建jwt应用")]),t._v(" "),a("li",[t._v("新建权限系统，并且关联到应用")])]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// config.idaas = {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   // 单点登陆地址 IDaaS发起地址")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   ssoEntry: 'https://ywkuvodbjl.login.aliyunidaas.com/enduser/bff/sso/go_d684d889984bfbc3c19749c8dc2050b7tgxc7VIMZuR?_enterprise_id=idaas-cn-nif1qdjn806',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   // jwt 解密文件 详情-应用信息-JWT PublicKey")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   keyPath: path.join(appInfo.baseDir, './resources/jwt_public_key_pkc8.pem'),")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   // api url")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   entry: 'https://ywkuvodbjl.login.aliyunidaas.com',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   // 账号系统配置 详情-API")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   account: {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     appKey: '0c8431fff5e292e164c1c3307e2b0eaaccoo5U1YICE',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     appSecret: 'btGvEqI7OJg7dVRXWbgcpUnrGHqT5BS7r5LYDqJuPq',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   },")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   // 权限系统配置 详情-管理应用内权限")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   ps: {")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     psId: '4XaWovFcC8',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     appKey: 'bda16e751768de7704b541b032f17aa71SB15YXtuTE',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//     appSecret: 'QqN17MyWPeIzATGv3stD63DZxHodCeeB3YsJ0gpcDV',")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//   },")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// };")]),t._v("\n")])])]),a("h2",{attrs:{id:"部署相关坑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署相关坑"}},[t._v("#")]),t._v(" 部署相关坑")]),t._v(" "),a("ul",[a("li",[t._v("package")]),t._v(" "),a("li",[a("ul",[a("li",[t._v("name")])])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("build：test")])])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("build：pre")])])]),t._v(" "),a("li",[a("ul",[a("li",[t._v("build：prod")])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);